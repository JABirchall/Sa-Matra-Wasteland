/*
	ArmA 3 Wasteland
	Code written by Sa-Matra
	Using this code without Sa-Matra's direct permission is forbidden
	
	
	Special build for Dwarden
	
	ESABQIEXHTFRGOFR
*/
#include "hpp\idcs.hpp"
#include "hpp\settings.hpp"
wgxxbi=wgjskr;wg1tu3={createDialog "Wasteland_PlayerSettings";private["_0nm","_0gn"];disableSerialization;_0nm=uiNamespace getVariable "Wasteland_PlayerSettings";if(isNil{_0nm})exitWith{systemChat "Error: Failed to open Player Settings, display is nil";};if(isNull(_0nm))exitWith{systemChat "Error: Failed to open Player Settings, display is null";};[_0nm,""]call bis_fnc_guiEffectTiles;(_0nm displayCtrl wgrqav)ctrlSetText wg4sje;(_0nm displayCtrl wgrqav)ctrlShow!isStreamFriendlyUIEnabled;(_0nm displayCtrl wglhol)ctrlSetChecked wgemh9;(_0nm displayCtrl wgg4wk)ctrlSetChecked wgp3s7;call wg9ukx;call wgmwyb;if((serverCommandAvailable "#kick")||(wghrav in(call settings_trustedUIDs)))then{(_0nm displayCtrl wgxxbi)ctrlShow true;};};wgy2mn={waitUntil{_02s=vehicle player;waitUntil{_02s!=vehicle player};call wghz83;false};};wgmwyb={private["_0nm","_05d"];disableSerialization;_0nm=uiNamespace getVariable "Wasteland_PlayerSettings";if(isNull(_0nm))exitWith{};(_0nm displayCtrl wg185o)ctrlSetText format["%1",wg31e4 select 0];(_0nm displayCtrl wgs651)ctrlSetText format["%1",wg31e4 select 1];(_0nm displayCtrl wgkktq)ctrlSetText format["%1",wg31e4 select 2];};wgcrmw={private["_0ra"];_0ra=(((wg31e4 select(_this select 0))+(_this select 1))min(switch(_this select 0)do{case 0:{4000};case 1:{4000};case 2:{3000};case 3:{5000};}))max 500;wg31e4 set[(_this select 0),_0ra];call wgmwyb;call wghz83;};wghz83={private["_0ra"];_0ra=call wgfj8p;setViewDistance _0ra;if(_0ra>=2500)then{setTerrainGrid 5;}else{setTerrainGrid 25;};};wgfj8p={switch(true)do{case(vehicle player==player||(vehicle player)isKindOf "ParachuteBase"):{wg31e4 select 0};case((vehicle player)isKindOf "Air"):{wg31e4 select 2};default{wg31e4 select 1};}};wg9ukx={private["_0nm","_05d"];disableSerialization;_0nm=uiNamespace getVariable "Wasteland_PlayerSettings";if(isNull(_0nm))exitWith{};_05d=format["New method updates icons each frame and requires more processing powers, old method updates icons less often and recommended when you have low FPS.<br/>Active: %1",if(wg24bf==0)then{"New method"}else{"Old method"}];(_0nm displayCtrl wgk8p8)ctrlSetStructuredText parseText _05d;};wgotc9={if(_this==1)then{_this=true}else{_this=false};wgco5z=_this;private["_0nm"];disableSerialization;_0nm=uiNamespace getVariable "Wasteland_PlayerSettings";if(isNull(_0nm))exitWith{};(_0nm displayCtrl wgrqav)ctrlShow!_this;_0nm=uiNamespace getVariable "Wasteland_PlayerMenu";if(!isNull(_0nm))then{(_0nm displayCtrl wgt9k1)ctrlShow!_this;};_0nm=findDisplay 12;if(!isNull(_0nm))then{(_0nm displayCtrl 111)ctrlShow!_this;(_0nm displayCtrl 112)ctrlShow!_this;};if(_this)then{[49,[109]]spawn wgxirk;[602,[111]]spawn wgxirk;};};wgfx4g={if(_this==1)then{_this=true}else{_this=false};wgemh9=_this;enableEnvironment _this;};wg4a7n={if(_this==1)then{_this=true}else{_this=false};wgp3s7=_this;player setVariable["show_me_on_map",wgp3s7,true];};wgxirk={while{isStreamFriendlyUIEnabled}do{waitUntil{!isNull(findDisplay(_this select 0))||!isStreamFriendlyUIEnabled};if(!isStreamFriendlyUIEnabled)exitWith{};{((findDisplay(_this select 0))displayCtrl _x)ctrlShow false;}forEach(_this select 1);waitUntil{isNull(findDisplay(_this select 0))||!isStreamFriendlyUIEnabled};};};